<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DVDS Availability</title>
<style>
  :root{
    --ink:#0b1320; --muted:#6b7280; --ring:#e5e7eb; --bg:#f8fafc; --brand:#10b981; --brand-ink:#065f46;
    --tile:#ffffff; --tile-muted:#f3f4f6; --tile-dark:#e5e7eb; --tile-hover:#f9fafb;
  }
  *{ box-sizing:border-box }
  body{ margin:0; font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto; color:var(--ink); background:#fff; }
  header{ padding:16px 20px; border-bottom:1px solid var(--ring); position:sticky; top:0; background:#fff; z-index:20; }
  h1{ font-size:1.4rem; margin:0 0 6px }
  .sub{ color:var(--muted); font-size:.95rem }
  .toolbar{ display:flex; gap:16px; align-items:flex-start; flex-wrap:wrap; margin-top:8px }
  .finder{ display:flex; flex-direction:column; gap:6px; min-width:280px; }
  .finder-label{ font-weight:600; font-size:.95rem; }
  .finder-box{ position:relative; display:flex; align-items:center; border:1px solid var(--ring); border-radius:12px; padding:4px 12px; background:#fff; }
  .finder-input{ flex:1; border:0; font-size:1rem; padding:8px 4px; outline:none; min-width:0; }
  .finder-input::placeholder{ color:var(--muted); }
  .finder-input:disabled{ background:var(--tile-muted); cursor:not-allowed; color:#9ca3af; }
  .finder-clear{ border:0; background:none; color:var(--muted); cursor:pointer; padding:4px; border-radius:8px; }
  .finder-clear:hover{ color:var(--ink); background:rgba(15,23,42,0.06); }
  .finder-clear:disabled{ opacity:.4; cursor:not-allowed; }
  .finder-message{ color:var(--muted); font-size:.9rem; line-height:1.3; }
  .finder-message.error{ color:#b91c1c; }
  .finder-message.success{ color:var(--brand-ink); }
  .status{ font-weight:700 }
  .app{ display:grid; grid-template-columns: minmax(0,1fr); gap:16px; padding:16px 20px; align-items:start }
  .stack{ display:flex; flex-direction:column; gap:16px; min-width:0; }
  @media (max-width: 980px){
    .app{ grid-template-columns:1fr; }
  }
  @media (max-width: 640px){
    .finder{ width:100%; }
    .finder-box{ padding:4px 10px; }
  }

  .hidden{ display:none !important; }

  /* Calendar */
  .cal{ border:1px solid var(--ring); border-radius:16px; overflow:hidden; background:#fff }
  .cal-hdr{ display:flex; justify-content:space-between; align-items:center; padding:12px 14px; background:var(--bg); border-bottom:1px solid var(--ring) }
  .nav{ display:flex; gap:8px; align-items:center }
  .navbtn{ border:1px solid var(--ring); background:#fff; border-radius:10px; padding:6px 10px; cursor:pointer }
  .month{ font-weight:600 }
  .grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:1px; background:var(--ring) }
  .dow,.cell{ background:#fff; min-height:90px; padding:12px }
  .dow{ text-align:center; font-size:.85rem; color:var(--muted); background:#f3f4f6 }
  .cell{ position:relative; transition:background .15s }
  .cell.clickable:hover{ background:var(--tile-hover); cursor:pointer }
  .date{ font-weight:600; font-size:.95rem }
  .badge{ position:absolute; right:10px; bottom:10px; font-size:.75rem; color:var(--brand-ink) }
  .past{ color:#9ca3af; background:var(--tile-dark) }
  .empty{ background:var(--tile-muted); color:#9ca3af }
  .disabled{ pointer-events:none }
  .today{ outline:2px solid #d1fae5; outline-offset:-4px; border-radius:8px }
  .active{ box-shadow:0 0 0 2px var(--brand) inset; border-radius:8px }
  .skeleton{ background:linear-gradient(90deg,#f8fafc,#eef2f7,#f8fafc); background-size:200% 100%; animation:sh 1.2s infinite; }
  @keyframes sh{ 0%{background-position:0% 0;} 100%{background-position:200% 0;} }

  /* Times panel */
  .panel{ border:1px solid var(--ring); border-radius:16px; overflow:hidden; background:#fff; display:flex; flex-direction:column; min-height:420px }
  .panel-hdr{ display:flex; align-items:center; gap:10px; padding:12px 14px; background:#f9fafb; border-bottom:1px solid var(--ring) }
  .panel-title{ font-weight:600 }
  .panel-body{ padding:14px; display:flex; flex-direction:column; gap:20px; }
  .pills{ display:flex; flex-wrap:wrap; gap:10px }
  .pill{ display:inline-block; padding:10px 14px; border:1px solid var(--ring); border-radius:12px; background:#fff; }
  .emptymsg{ color:var(--muted) }

  /* Packages */
  .packages{ border-top:1px solid var(--ring); padding-top:16px; display:flex; flex-direction:column; gap:16px; }
  .packages-title{ font-weight:600; font-size:1.05rem; }
  .packages-note{ color:var(--muted); font-size:.9rem; line-height:1.4; }
  .packages-note.hidden{ display:none; }
  .package-grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:12px; }
  .package-card{ border:1px solid var(--ring); border-radius:14px; padding:16px; background:var(--tile); display:flex; flex-direction:column; gap:12px; box-shadow:0 6px 20px rgba(15,23,42,0.06); transition:transform .15s, box-shadow .15s; }
  .package-card:hover{ transform:translateY(-2px); box-shadow:0 12px 26px rgba(15,23,42,0.12); }
  .package-header{ display:flex; align-items:center; gap:10px; font-weight:600; }
  .package-emoji{ font-size:1.5rem; }
  .package-name{ font-size:1.05rem; }
  .package-details{ color:var(--muted); font-size:.9rem; line-height:1.4; }
  .package-cta{ align-self:flex-start; padding:10px 16px; border-radius:999px; background:var(--brand); color:#fff; font-weight:600; text-decoration:none; display:inline-flex; align-items:center; gap:6px; transition:background .15s, transform .15s; }
  .package-cta:hover{ background:var(--brand-ink); transform:translateY(-1px); }
</style>
</head>
<body>
  <header>
    <h1>DVDS Availability</h1>
    <div class="toolbar">
      <div><span class="status" id="status">Loading…</span></div>
      <form id="finder" class="finder" autocomplete="off">
        <label for="finder-input" class="finder-label">Find your city, ZIP, or address</label>
        <div class="finder-box">
          <input id="finder-input" class="finder-input" type="search" placeholder="Start typing…" enterkeyhint="search" />
          <button id="finder-clear" class="finder-clear" type="button" aria-label="Clear search">✕</button>
        </div>
      </form>
    </div>
    <div id="finder-message" class="finder-message">Search for your city or ZIP to view the packages available in your area.</div>
  </header>

  <main class="app">
    <div class="stack">
      <section class="cal" aria-live="polite">
        <div class="cal-hdr">
          <div class="nav">
            <button id="prev" class="navbtn" aria-label="Previous Month">◀</button>
            <button id="next" class="navbtn" aria-label="Next Month">▶</button>
          </div>
          <div id="monthlabel" class="month">—</div>
        </div>
        <div class="grid" id="grid"></div>
      </section>

      <aside class="panel">
        <div class="panel-hdr">
          <div id="paneltitle" class="panel-title">Select a day</div>
        </div>
        <div class="panel-body">
          <div id="times" class="pills"></div>
          <section id="packages" class="packages hidden" aria-live="polite">
            <div>
              <div class="packages-title">Packages</div>
              <div id="packages-note" class="packages-note hidden"></div>
            </div>
            <div id="packageGrid" class="package-grid"></div>
          </section>
        </div>
      </aside>
    </div>
  </main>

  <script type="module" src="/app.js"></script>
</body>
</html>
